<!-- Header -->
<div class="flex flex-col gap-2">
  <h2 class="text-[#111317] dark:text-white text-3xl font-bold tracking-tight">Esqueci a Senha</h2>
  <p class="text-[#646e87] dark:text-gray-400 text-base font-normal">
    Não se preocupe, acontece! Insira seu email acadêmico e enviaremos um código de verificação.
  </p>
</div>

@if (emailSent()) {
  <!-- Success Message -->
  <div class="flex flex-col gap-6 animate-in fade-in zoom-in-95">
    <div
      class="w-16 h-16 bg-emerald-100 dark:bg-emerald-900/30 rounded-2xl flex items-center justify-center mx-auto"
    >
      <span class="material-symbols-outlined text-emerald-600 dark:text-emerald-400 text-3xl">
        mark_email_read
      </span>
    </div>
    <div class="text-center flex flex-col gap-2">
      <h3 class="text-[#111317] dark:text-white text-xl font-bold">Email Enviado!</h3>
      <p class="text-[#646e87] dark:text-gray-400 text-sm">
        Verifique sua caixa de entrada. Enviamos um código de verificação para o email informado.
      </p>
    </div>
  </div>
} @else {
  <!-- Form -->
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex flex-col gap-5">
    <!-- Email Field -->
    <label class="flex flex-col gap-2">
      <span class="text-[#111317] dark:text-white text-sm font-medium leading-normal">
        Email Acadêmico
      </span>
      <input
        type="email"
        formControlName="email"
        placeholder="seu.email@universidade.edu"
        class="form-input w-full rounded-xl border border-[#dcdfe5] dark:border-gray-700 bg-white dark:bg-[#1a202e] px-4 h-12 placeholder:text-[#646e87] dark:placeholder:text-gray-500 text-[#111317] dark:text-white text-base font-normal leading-normal focus:border-[#3f70e4] focus:ring-2 focus:ring-[#3f70e4]/20 transition-all outline-none"
        [class.border-red-500]="form.get('email')?.invalid && form.get('email')?.touched"
      />
      @if (form.get('email')?.invalid && form.get('email')?.touched) {
        <span class="text-red-500 text-sm font-normal leading-normal">
          @if (form.get('email')?.errors?.['required']) {
            Email é obrigatório
          }
          @if (form.get('email')?.errors?.['email']) {
            Email inválido
          }
        </span>
      }
    </label>

    <!-- Submit Button -->
    <button
      type="submit"
      [disabled]="isLoading()"
      class="mt-2 flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-5 bg-[#3f70e4] hover:bg-[#3f70e4]/90 transition-colors text-white text-base font-bold leading-normal tracking-[0.015em] shadow-lg shadow-[#3f70e4]/20 disabled:opacity-50 disabled:cursor-not-allowed"
    >
      @if (isLoading()) {
        <div class="flex items-center gap-2">
          <div
            class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"
          ></div>
          <span>Enviando...</span>
        </div>
      } @else {
        <span>Enviar Código de Verificação</span>
      }
    </button>
  </form>

  <!-- Help Text -->
  <div class="text-center">
    <p class="text-[#646e87] dark:text-gray-400 text-sm">
      Precisa de ajuda?
      <a
        href="#"
        class="text-[#3f70e4] font-semibold hover:underline decoration-2 underline-offset-2"
      >
        Contate o Suporte
      </a>
    </p>
  </div>
}

<!-- Back Link -->
<div class="text-center">
  <button
    (click)="goBack()"
    class="inline-flex items-center text-[#646e87] dark:text-gray-400 hover:text-[#3f70e4] transition-colors text-sm font-medium group"
  >
    <span
      class="material-symbols-outlined mr-1 text-lg group-hover:-translate-x-1 transition-transform"
    >
      arrow_back
    </span>
    Voltar para o Login
  </button>
</div>
